// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// datasource db {
//   provider = "sqlite"
//   url      = env("DATABASE_URL")
// }

model User {
  id              String     @id @default(cuid())
  emp_id          String     @unique
  name            String
  hashedPassword  String?
  email           String     @unique
  dob             DateTime?
  group           String?
  designation     String?
  pbx             String?
  direct_phone    String?
  residence_phone String?
  mobile          String?
  location        String?
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
  joining_date    DateTime?
  server          Server[]
  tasks           TaskNote[]
  newsLetter      Boolean    @default(false)

  @@index([name], name: "name")
}

model Server {
  id        String   @id @default(cuid())
  name      String   @unique
  ip        String   @unique
  cpu       String?
  storage   String?
  WAN       String?
  sshcmd    String?
  memory    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  User      User?    @relation(fields: [userId], references: [id])
  userId    String?
}

model TaskNote {
  id        String   @id @default(cuid())
  message   String
  createdAt DateTime @default(now())
  checked   Boolean  @default(false)
  User      User?    @relation(fields: [userId], references: [id])
  userId    String?
}

model notices {
  id        String   @id @default(cuid())
  title     String
  message   String
  slug      String?  @unique
  createdAt DateTime @default(now())
  checked   Boolean  @default(false)
}

model canteenMenu {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  breakfast String?
  lunch     String?
  snacks    String?
}
